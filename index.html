<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVE Online: Judge's Terminal</title>
    <style>
        body { 
            background: #020204; color: #e0e0e0; font-family: 'Segoe UI', sans-serif; 
            display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; 
        }
        .short-screen { 
            width: 360px; height: 640px; background: black; border: 2px solid #333; 
            position: relative; display: flex; flex-direction: column; box-shadow: 0 0 20px rgba(0,255,255,0.1); 
        }
        .short-screen::after { 
            content: " "; position: absolute; top: 0; left: 0; bottom: 0; right: 0; 
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 255, 0, 0.06)); 
            background-size: 100% 2px, 3px 100%; pointer-events: none; 
        }
        .header { padding: 15px; background: rgba(255, 0, 0, 0.1); border-bottom: 1px solid #ff4444; text-align: center; }
        .status-pill { background: #ff4444; color: black; font-weight: bold; padding: 5px 10px; border-radius: 4px; font-size: 0.7rem; }
        
        .content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; overflow-y: auto; scrollbar-width: none; }
        .content::-webkit-scrollbar { display: none; }

        .charge-item {
            font-family: 'Impact', sans-serif; font-size: 1.8rem; color: #f0db4f; 
            text-transform: uppercase; line-height: 1.1; text-shadow: 2px 2px 0px #000; 
            margin-top: 15px; text-align: center; animation: blink 0.1s ease-in 2;
        }
        @keyframes blink { 0% { opacity: 0; } 100% { opacity: 1; } }

        .dice-btn { 
            background: transparent; color: #ff4444; border: 2px solid #ff4444; padding: 20px; 
            font-size: 1.2rem; font-weight: bold; cursor: pointer; text-transform: uppercase; width: 100%; 
        }
        .twitch-user { color: #a970ff; font-weight: bold; font-size: 1.2rem; margin-bottom: 10px; text-transform: uppercase; }
        
        /* PANEL DEL JUEZ ACTUALIZADO */
        .judge-panel {
            background: #111; padding: 10px; border-top: 1px solid #333; z-index: 10;
            display: flex; flex-direction: column; gap: 8px;
        }
        .judge-row { display: flex; gap: 8px; }
        .judge-input {
            background: #000; border: 1px solid #444; color: #00ffcc; padding: 8px;
            font-family: monospace; font-size: 0.8rem; flex-grow: 1; outline: none;
        }
        .judge-input:focus { border-color: #00ffcc; }
        .btn-judge {
            flex: 1; padding: 10px; font-size: 0.7rem; font-weight: bold; 
            text-transform: uppercase; cursor: pointer; border: 1px solid #444; background: #222; color: white;
        }
        .btn-add { border-color: #00ffcc; color: #00ffcc; }
        .btn-reset { border-color: #ff4444; color: #ff4444; }

        .faction-logo { font-size: 0.6rem; color: #444; padding: 5px; letter-spacing: 2px; text-align: center; }
    </style>
</head>
<body>

<div class="short-screen">
    <div class="header">
        <span class="status-pill">CONCORD CUSTODY</span>
        <h1 style="font-size: 1rem; margin: 5px 0 0 0;">OFFICIAL WARRANT</h1>
    </div>

    <div class="content" id="main-content">
        <div id="start-zone" style="text-align: center; margin-top: auto; margin-bottom: auto;">
            <div id="display-name" class="twitch-user">UNKNOWN CAPSULEER</div>
            <button class="dice-btn" onclick="processDetention()">Confirm Identity</button>
        </div>

        <div id="defendant-zone" style="display:none;">
            <p id="wait-label" style="color: #00ffcc; letter-spacing: 2px; text-align: center; font-size: 0.8rem;">CRIMINAL RECORD FOUND:</p>
            <div id="charge-container"></div>
        </div>
    </div>

    <div class="judge-panel">
        <input type="text" id="judge-name-input" class="judge-input" placeholder="Edit Defendant Name..." oninput="updateName(this.value)">
        <div class="judge-row">
            <button class="btn-judge btn-add" onclick="addCharge()">+ Add Charge</button>
            <button class="btn-judge btn-reset" onclick="resetCourt()">Reset</button>
        </div>
    </div>

    <div class="faction-logo">DED - SECURE COMMERCE COMMISSION</div>
</div>

<script>
    // Carga inicial desde URL
    const urlParams = new URLSearchParams(window.location.search);
    let currentUser = urlParams.get('user') || "Unknown Pilot";
    
    // Inicializar visualmente
    document.getElementById('display-name').innerText = currentUser;
    document.getElementById('judge-name-input').value = currentUser;

    const chargeDeck = [
        "AMARR I.C.E RESISTANCE", "Espionage for Goonswarm Alliance", "Tax Evasion at Jita IV-4",
        "dont bring your drake", "Unauthorized Cyno Lighting", "Amarr Slave Smuggling",
        "Illegal Abyssal Tech Possession", "cheat with FC wife", "S.E.A.T FRAUD","you didnt like and subscribe",
        "UNLICENSED SALT MINING","BUMPING WITHOUT A LICENSE","LEAKING INTEL ON TWITCH","BROADCASTING 'NEED REPS' AT 100% HP",
    ];

    let usedCharges = [];

    // Función para actualizar el nombre desde el input del Juez
    function updateName(val) {
        currentUser = val || "Unknown Pilot";
        document.getElementById('display-name').innerText = currentUser;
        
        // Si ya estamos en la zona de cargos, actualizamos el label de espera también
        if(usedCharges.length > 0) {
            document.getElementById('wait-label').innerText = "INDICTMENT FOR " + currentUser.toUpperCase() + ":";
        }
    }

    function processDetention() {
        document.getElementById('start-zone').style.display = 'none';
        document.getElementById('defendant-zone').style.display = 'block';
        document.getElementById('wait-label').innerText = "INDICTMENT FOR " + currentUser.toUpperCase() + ":";
        addCharge();
    }

    function addCharge() {
        if(document.getElementById('defendant-zone').style.display === 'block') {
            const container = document.getElementById('charge-container');
            const availableCharges = chargeDeck.filter(c => !usedCharges.includes(c));

            if (availableCharges.length === 0) return;

            const randomIndex = Math.floor(Math.random() * availableCharges.length);
            const selectedCrime = availableCharges[randomIndex];
            usedCharges.push(selectedCrime);

            const newCharge = document.createElement('div');
            newCharge.className = 'charge-item';
            newCharge.innerText = selectedCrime;
            container.appendChild(newCharge);

            const content = document.getElementById('main-content');
            setTimeout(() => { content.scrollTo({ top: content.scrollHeight, behavior: 'smooth' }); }, 100);
        }
    }

    function resetCourt() {
        usedCharges = [];
        document.getElementById('charge-container').innerHTML = "";
        document.getElementById('defendant-zone').style.display = 'none';
        document.getElementById('start-zone').style.display = 'block';
        // Mantenemos el nombre que el juez escribió o reseteamos a la URL
        document.getElementById('display-name').innerText = currentUser;
    }
</script>

</body>
</html>

